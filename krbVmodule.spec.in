%define pyver %(%{__python} -c "import sys ; print sys.version[:3]")

Summary: Python extension module for Kerberos 5
Name: python-krbV
Version: @VERSION@
Release: 1
License: LGPL
Group: Development/Languages
Source: krbVmodule-%{version}.tar.gz
Buildroot: /var/tmp/krb5module-root
BuildRequires: python-devel >= %{pyver}
BuildRequires: krb5-devel >= 1.2.2
BuildRequires: /bin/awk
Requires: python-abi = %{pyver}
Requires: krb5-libs >= 1.2.2

%description
Allows python programs to use Kerberos 5 authentication/security.

%prep
%setup -q -n krbVmodule-%{version}

%build
export LIBNAME=%{_lib}
%configure
make %{?_smp_mflags}

%install
rm -rf $RPM_BUILD_ROOT
mkdir -p $RPM_BUILD_ROOT/%{_libdir}/python%{pyver}/site-packages
%makeinstall
rm -f $RPM_BUILD_ROOT/%{_libdir}/python%{pyver}/site-packages/*.la

rm -f $RPM_BUILD_ROOT/%{_libdir}/python%{pyver}/site-packages/*.la

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root,-)
%doc README
%{_libdir}/python%{pyver}/site-packages/krbVmodule.so

%changelog
* Fri Mar 24 2006 Mike Bonnet <mikeb@redhat.com>
- fix typo in error definition
- change the return value of recvauth() from ac to (ac, princ), where princ is the principal sent by sendauth()
- rename the RPM and reorganize the BuildRequires, to be more Extras-friendly

* Tue Sep 25 2001 Elliot Lee <sopwith@redhat.com>
- Initial version
